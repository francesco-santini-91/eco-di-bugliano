(this["webpackJsonpeco-di-bugliano"]=this["webpackJsonpeco-di-bugliano"]||[]).push([[0],{19:function(e,t,a){},23:function(e,t,a){e.exports=a.p+"static/media/like.804d61db.svg"},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},40:function(e,t,a){e.exports=a(77)},45:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(37),r=a.n(i),l=(a(45),a(3)),o=a(4),c=a(6),u=a(5),h=a(15),m=a(9),d=a(39),b=a(2),p=a.n(b),g=a(7),v=a(1),f=a(8),E=a.n(f),k=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:sessionStorage.getItem("token"),username:"",isAdmin:"",isSuperUser:"",isAuthenticated:n.verifyToken(sessionStorage.getItem("token"))},n.verifyToken=n.verifyToken.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"verifyToken",value:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=8;break}return a=!1,n="",s="",i="",e.next=7,E.a.post("/server/login/verify",{token:t}).then((function(e){e.data.valid&&(a=!0,n=e.data.decoded.username,s=e.data.decoded.isAdmin,i=e.data.decoded.isSuperUser)})).catch((function(e){}));case 7:this.setState({isAuthenticated:a,username:n,isAdmin:s,isSuperUser:i});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(d.a)(t,["component"]);return s.a.createElement(m.b,Object.assign({},n,{render:function(t){return e.state.isAuthenticated?s.a.createElement(a,Object.assign({},t,{username:e.state.username,isAdmin:e.state.isAdmin,isSuperUser:e.state.isSuperUser})):s.a.createElement(m.a,{to:"/login"})}}))}}]),a}(n.Component),N=(a(69),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isAuthenticated:!1,user:sessionStorage.getItem("user")},n.goToProfile=n.goToProfile.bind(Object(v.a)(n)),n.logout=n.logout.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){sessionStorage.user&&this.setState({isAuthenticated:!0})}},{key:"componentWillUnmount",value:function(){this.setState({isAuthenticated:!1})}},{key:"goToProfile",value:function(){window.location.replace("/users/"+this.state.user)}},{key:"logout",value:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),localStorage.clear(),window.location.replace("/articles")}},{key:"render",value:function(){return s.a.createElement("div",{className:"Header"},s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-warning fixed-top"},s.a.createElement("a",{className:"navbar-brand",href:"/"},"Eco di Bugliano"),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item active"},s.a.createElement("a",{className:"nav-link",href:"/articles?page=1"},"Ultime notizie")),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{className:"nav-link",href:"/category/Cronaca?page=1"},"Cronaca")),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{className:"nav-link",href:"/category/Politica?page=1"},"Politica")),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{className:"nav-link",href:"/category/Economia?page=1"},"Economia")),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{className:"nav-link",href:"/category/Tecnologia?page=1"},"Tecnologia")),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{className:"nav-link",href:"/category/Sport?page=1"},"Sport")),s.a.createElement("li",{className:"nav-item",hidden:this.state.isAuthenticated},s.a.createElement("a",{className:"nav-link",href:"/login"},"Area riservata")),s.a.createElement("li",{className:"nav-item",hidden:!this.state.isAuthenticated},s.a.createElement("a",{className:"nav-link",href:"#",onClick:this.goToProfile},"Profilo utente")),s.a.createElement("li",{className:"nav.item",hidden:!this.state.isAuthenticated},s.a.createElement("a",{className:"nav-link",onClick:this.logout},"Logout"))))))}}]),a}(n.Component)),y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return window.location.replace("/articles?page=1"),s.a.createElement("div",null)}}]),a}(n.Component),C=a(16),w=(a(70),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"Articles"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},s.a.createElement(h.b,{to:"/articles/"+this.props.title},s.a.createElement("img",{className:"imageURL rounded",alt:"",src:this.props.imageURL}))),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-8"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"title"},s.a.createElement("h4",null,this.props.title)))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"subtitle"},this.props.subtitle))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"text-truncate"},s.a.createElement("p",null,this.props.content)))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"linkToURL"},s.a.createElement(h.b,{to:"/articles/"+this.props.title},"Vai all'articolo")))))))),s.a.createElement("hr",null))}}]),a}(n.Component)),S=(a(34),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loaded:!1,total:null,articles:[]},n.showPagination=n.showPagination.bind(Object(v.a)(n)),n.loading=n.loading.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/articles"+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({articles:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/articles/count").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalArticles})})).catch(console.log);case 4:this.setState({loaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return s.a.createElement("div",{className:"spinner-border text-info",hidden:this.state.loaded,role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))}},{key:"showContent",value:function(){if(0===this.state.articles.length&&!0===this.state.loaded)return s.a.createElement("div",{className:"NoArticles"},s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Non ci sono articoli!"));var e,t=[],a=Object(C.a)(this.state.articles);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(s.a.createElement(w,{key:n._id,id:n.id,title:n.title,subtitle:n.subtitle,imageURL:n.imageURL,content:n.content}))}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"showPagination",value:function(){for(var e=[],t=1;t<this.state.total/5+1;t++)e.push(s.a.createElement("li",{key:t,className:"page-item"},s.a.createElement("a",{className:"page-link",href:"/articles?page="+t},t)));return e}},{key:"render",value:function(){return s.a.createElement("div",{className:"Articles"},this.loading(),this.showContent(),s.a.createElement("div",{className:"pages"},s.a.createElement("nav",{"aria-label":"Page navigation"},s.a.createElement("ul",{className:"pagination justify-content-center"},this.showPagination()))))}}]),a}(n.Component)),j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loaded:!1,articles:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/articles/category/"+this.props.match.params.category+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({articles:e})})).catch(console.log);case 2:this.setState({loaded:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return s.a.createElement("div",{className:"spinner-border text-info",hidden:this.state.loaded,role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))}},{key:"showContent",value:function(){if(0===this.state.articles.length&&!0===this.state.loaded)return s.a.createElement("div",{className:"NoArticles"},s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Non ci sono articoli!"));var e,t=[],a=Object(C.a)(this.state.articles);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(s.a.createElement(w,{key:n._id,id:n.id,title:n.title,subtitle:n.subtitle,imageURL:n.imageURL,content:n.content}))}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"render",value:function(){return s.a.createElement("div",{className:"ArticlesByCategory"},this.loading(),this.showContent())}}]),a}(n.Component),O=(a(71),a(23)),U=a.n(O),A=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={like:!1,likes:null},n.formatData=n.formatData.bind(Object(v.a)(n)),n.like=n.like.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"formatData",value:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth(),s=t.getDate(),i=t.getHours();i<10&&(i="0"+i);var r=t.getMinutes();return r<10&&(r="0"+r),s+" "+["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"][n]+" "+a+", "+i+"."+r}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"like",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({like:!0}),t=null,e.next=4,E.a.post("/server/articles/"+this.props.title).then((function(e){t=e.data.likes?e.data.likes:this.props.likes})).catch((function(e){console.log(e)}));case 4:this.setState({likes:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"fullArticle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12"},s.a.createElement("h2",null,this.props.title))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 subtitle"},s.a.createElement("h4",null,this.props.subtitle))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 pubblication"},s.a.createElement("p",null,"Pubblicato il ",this.formatData(this.props.pubblication)))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 author"},s.a.createElement("p",null,"Di ",this.props.author))),s.a.createElement("div",{className:"col-xs-12"},s.a.createElement("div",{className:"img-fluid"},s.a.createElement("figure",{className:"figure "},s.a.createElement("img",{className:"imageURL-FULL img-fluid rounded",alt:"",src:this.props.imageURL}),s.a.createElement("figcaption",{className:"figure-caption"},this.props.imageCaption)))))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"content"},this.props.content))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"likes"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary",hidden:this.state.like,onClick:this.like},s.a.createElement("img",{src:U.a,alt:"",className:"icon"})," Mi Garba"),s.a.createElement("button",{type:"submit",disabled:!0,className:"btn btn-lg btn-outline-primary",hidden:!this.state.like,onClick:this.unlike},s.a.createElement("img",{src:U.a,alt:"",className:"icon"})," Ti Garba!")),s.a.createElement("p",{className:"labelLike",hidden:this.state.like},"Garba a ",this.props.likes," persone!"),s.a.createElement("p",{className:"labelLike",hidden:!this.state.like},"Garba a ",this.state.likes," persone!"))))))}}]),a}(n.Component),x=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={articleNotFound:!1,article:{}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/articles/"+this.props.match.params.id).then((function(e){return e.json()})).then((function(e){return t.setState({article:e})})).catch(console.log);case 2:this.state.article.title||this.setState({articleNotFound:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"fullArticleContainer"},s.a.createElement("div",{className:"articleFound",hidden:this.state.articleNotFound},s.a.createElement(A,{title:this.state.article.title,subtitle:this.state.article.subtitle,content:this.state.article.content,imageURL:this.state.article.imageURL,imageCaption:this.state.article.imageCaption,author:this.state.article.author,pubblication:this.state.article.pubblication,category:this.state.article.category,likes:this.state.article.likes})),s.a.createElement("div",{className:"articleNotFound",hidden:!this.state.articleNotFound},s.a.createElement("br",null),s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Articolo non trovato!")))}}]),a}(n.Component),D=(a(19),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:sessionStorage.getItem("token"),showConfirmDelete:!1},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.edit=n.edit.bind(Object(v.a)(n)),n.showConfirmDelete=n.showConfirmDelete.bind(Object(v.a)(n)),n.abortDelete=n.abortDelete.bind(Object(v.a)(n)),n.delete=n.delete.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"edit",value:function(){window.location.replace("/users/"+this.props.author+"/edit/"+this.props.title)}},{key:"showConfirmDelete",value:function(){this.setState({showConfirmDelete:!0})}},{key:"abortDelete",value:function(){this.setState({showConfirmDelete:!1})}},{key:"delete",value:function(){var e=!1;E.a.patch("/server/articles/"+this.props.title,{token:this.state.token}).then((function(t){t.data.deleted&&window.location.reload(),t.data.unhautorized&&(e=!0)})).catch((function(e){console.log(e)})),this.setState({unhautorized:e}),this.setState({loaded:!0})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Articles"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},s.a.createElement("img",{className:"imageURL rounded",alt:"",src:this.props.imageURL})),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-8"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"title"},s.a.createElement("h4",null,this.props.title)))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"subtitle"},this.props.subtitle))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"author"},s.a.createElement("p",null,this.props.author)))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"linkToURL"},s.a.createElement(h.b,{to:"/articles/"+this.props.title},"Vai all'articolo")))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"editDelete"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-warning buttons",hidden:this.state.showConfirmDelete,onClick:this.edit},"Modifica"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-danger buttons",hidden:this.state.showConfirmDelete,onClick:this.showConfirmDelete},"Elimina"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-dark buttons",hidden:!this.state.showConfirmDelete,onClick:this.abortDelete},"Annulla"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-danger buttons buttonDelete",hidden:!this.state.showConfirmDelete,onClick:this.delete},"Conferma eliminazione"),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.unhautorized},"Utente non autorizzato!"))))))))),s.a.createElement("hr",null))}}]),a}(n.Component)),L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loaded:!1,articles:[],allArticles:[],username:n.props.username,isAdmin:""},n.showArticles=n.showArticles.bind(Object(v.a)(n)),n.loading=n.loading.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/users/"+sessionStorage.getItem("user")+"/articles").then((function(e){return e.json()})).then((function(e){return t.setState({articles:e,loaded:!0})})).catch(console.log);case 2:this.setState({loaded:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return s.a.createElement("div",{className:"spinner-border text-info",hidden:this.state.loaded,role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))}},{key:"showArticles",value:function(){if(0===this.state.articles.length&&!0===this.state.loaded)return s.a.createElement("div",{className:"NoArticles"},s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Non hai ancora pubblicato articoli!"));var e,t=[],a=Object(C.a)(this.state.articles);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(s.a.createElement(D,{key:n._id,title:n.title,subtitle:n.subtitle,imageURL:n.imageURL,author:n.author}))}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"render",value:function(){return s.a.createElement("div",{className:"ArticlesByAuthor"},this.loading(),s.a.createElement("h4",{className:"titleLabel"},"I tuoi articoli"),this.showArticles())}}]),a}(n.Component),I=(a(72),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:"",title:"",subtitle:"",imageURL:"",imageCaption:"",content:"",author:"",category:"",pubblication:"",likes:"",unhautorized:!1},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleIdChange=n.handleIdChange.bind(Object(v.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(v.a)(n)),n.handleSubtitleChange=n.handleSubtitleChange.bind(Object(v.a)(n)),n.handleImageURLChange=n.handleImageURLChange.bind(Object(v.a)(n)),n.handleImageCaptionChange=n.handleImageCaptionChange.bind(Object(v.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(v.a)(n)),n.handleCategoryChange=n.handleCategoryChange.bind(Object(v.a)(n)),n.handleLikesChange=n.handleLikesChange.bind(Object(v.a)(n)),n.abort=n.abort.bind(Object(v.a)(n)),n.save=n.save.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/articles/"+this.props.match.params.title).then((function(e){return e.json()})).then((function(e){return t.setState(e)})).catch(console.log);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleIdChange",value:function(e){this.setState({id:e.target.value})}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleSubtitleChange",value:function(e){this.setState({subtitle:e.target.value})}},{key:"handleImageURLChange",value:function(e){this.setState({imageURL:e.target.value})}},{key:"handleImageCaptionChange",value:function(e){this.setState({imageCaption:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleCategoryChange",value:function(e){this.setState({category:e.target.value})}},{key:"handleLikesChange",value:function(e){this.setState({likes:e.target.value})}},{key:"abort",value:function(){window.location.replace("/users/"+this.props.username+"/articles")}},{key:"save",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,E.a.put("/server/articles/"+this.state.title,{token:sessionStorage.getItem("token"),id:this.state.id,title:this.state.title,subtitle:this.state.subtitle,imageURL:this.state.imageURL,imageCaption:this.state.imageCaption,content:this.state.content,author:this.state.author,category:this.state.category,likes:this.state.likes}).then((function(e){e.data.unhautorized&&(t=!0),e.data.edited&&window.location.replace("/articles")})).catch((function(e){console.log(e)}));case 3:!0===t&&this.setState({unhautorized:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"editArticle"},s.a.createElement("h4",{className:"titleLabel"},"Modifica articolo"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"number",className:"form-control _id",disabled:!0,onChange:this.handleIdChange,value:this.state.id}),s.a.createElement("input",{type:"text",className:"form-control _title",disabled:!0,onChange:this.handleTitleChange,value:this.state.title}),s.a.createElement("input",{type:"text",className:"form-control _subtitle",onChange:this.handleSubtitleChange,value:this.state.subtitle}),s.a.createElement("input",{type:"text",className:"form-control _author",disabled:!0,value:this.state.username}),s.a.createElement("input",{type:"text",className:"form-control _imageURL",onChange:this.handleImageURLChange,value:this.state.imageURL}),s.a.createElement("input",{type:"text",className:"form-control _imageCaption",onChange:this.handleImageCaptionChange,value:this.state.imageCaption}),s.a.createElement("textarea",{className:"form-control __textarea",rows:"10",onChange:this.handleContentChange,value:this.state.content}),s.a.createElement("select",{className:"form-control",id:"category",onChange:this.handleCategoryChange,value:this.state.category},s.a.createElement("option",null,"Cronaca"),s.a.createElement("option",null,"Politica"),s.a.createElement("option",null,"Economia"),s.a.createElement("option",null,"Sport")),s.a.createElement("input",{type:"number",className:"form-control _likes",disabled:!0,onChange:this.handleLikesChange,value:this.state.likes}),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.unhautorized},"Utente non autorizzato!"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-dark abortButton",onClick:this.abort},"Annulla"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-primary saveButton",onClick:this.save},"Salva modifiche")))}}]),a}(n.Component)),z=(a(73),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={total:0,id:"",title:"",subtitle:"",imageURL:"",imageCaption:"",content:"",author:"",category:"Cronaca",likes:""},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleIdChange=n.handleIdChange.bind(Object(v.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(v.a)(n)),n.handleSubtitleChange=n.handleSubtitleChange.bind(Object(v.a)(n)),n.handleImageURLChange=n.handleImageURLChange.bind(Object(v.a)(n)),n.handleImageCaptionChange=n.handleImageCaptionChange.bind(Object(v.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(v.a)(n)),n.handleCategoryChange=n.handleCategoryChange.bind(Object(v.a)(n)),n.handleLikesChange=n.handleLikesChange.bind(Object(v.a)(n)),n.publish=n.publish.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleIdChange",value:function(e){this.setState({id:e.target.value})}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleSubtitleChange",value:function(e){this.setState({subtitle:e.target.value})}},{key:"handleImageURLChange",value:function(e){this.setState({imageURL:e.target.value})}},{key:"handleImageCaptionChange",value:function(e){this.setState({imageCaption:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleCategoryChange",value:function(e){this.setState({category:e.target.value})}},{key:"handleLikesChange",value:function(e){this.setState({likes:e.target.value})}},{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/articles/count").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalArticles})})).catch(console.log);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var e=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/server/articles/newArticle",{id:this.state.total,title:this.state.title,subtitle:this.state.subtitle,imageURL:this.state.imageURL,imageCaption:this.state.imageCaption,content:this.state.content,author:this.props.username,category:this.state.category,likes:this.state.likes}).then((function(e){e.data.published&&window.location.replace("/articles/")})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"newArticle"},s.a.createElement("h4",{className:"labelTitle"},"Nuovo articolo"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"number",className:"form-control _id",disabled:!0,placeholder:this.state.total}),s.a.createElement("input",{type:"text",className:"form-control _title",onChange:this.handleTitleChange,placeholder:"Titolo"}),s.a.createElement("input",{type:"text",className:"form-control _subtitle",rows:"2",onChange:this.handleSubtitleChange,placeholder:"Sottotitolo"}),s.a.createElement("input",{type:"text",className:"form-control _author",disabled:!0,placeholder:this.props.username}),s.a.createElement("input",{type:"text",className:"form-control _imageURL",onChange:this.handleImageURLChange,placeholder:"URL immagine"}),s.a.createElement("input",{type:"text",className:"form-control _imageCaption",onChange:this.handleImageCaptionChange,placeholder:"Didascalia immagine"}),s.a.createElement("textarea",{className:"form-control __textarea",rows:"10",onChange:this.handleContentChange,placeholder:"Corpo articolo"}),s.a.createElement("select",{className:"form-control",id:"category",onChange:this.handleCategoryChange},s.a.createElement("option",null,"Cronaca"),s.a.createElement("option",null,"Politica"),s.a.createElement("option",null,"Economia"),s.a.createElement("option",null,"Tecnologia"),s.a.createElement("option",null,"Sport")),s.a.createElement("input",{type:"number",className:"form-control _likes",disabled:!0,onChange:this.handleLikesChange,value:"0",placeholder:"Mi Piace"}),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-primary publishButton",onClick:this.publish},"Pubblica")))}}]),a}(n.Component)),P=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:sessionStorage.getItem("token"),showConfirmDelete:!1},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.edit=n.edit.bind(Object(v.a)(n)),n.showConfirmDelete=n.showConfirmDelete.bind(Object(v.a)(n)),n.abortDelete=n.abortDelete.bind(Object(v.a)(n)),n.delete=n.delete.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"edit",value:function(){window.location.replace("/users/"+this.props.author+"/edit/"+this.props.title)}},{key:"showConfirmDelete",value:function(){this.setState({showConfirmDelete:!0})}},{key:"abortDelete",value:function(){this.setState({showConfirmDelete:!1})}},{key:"delete",value:function(){var e=!1;E.a.patch("/server/articles/"+this.props.title,{token:this.state.token}).then((function(t){t.data.deleted&&window.location.reload(),t.data.unhautorized&&(e=!0)})).catch((function(e){console.log(e)})),this.setState({unhautorized:e})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Articles"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},s.a.createElement("img",{className:"imageURL rounded",alt:"",src:this.props.imageURL})),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-8"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"title"},s.a.createElement("h4",null,this.props.title)))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"subtitle"},this.props.subtitle))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"author"},s.a.createElement("p",null,this.props.author)))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"linkToURL"},s.a.createElement(h.b,{to:"/articles/"+this.props.title},"Vai all'articolo")))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs col-12"},s.a.createElement("div",{className:"editDelete"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-warning buttons",hidden:this.state.showConfirmDelete,onClick:this.edit},"Modifica"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-danger buttons",hidden:this.state.showConfirmDelete,onClick:this.showConfirmDelete},"Elimina"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-dark buttons",hidden:!this.state.showConfirmDelete,onClick:this.abortDelete},"Annulla"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-danger buttons buttonDelete",hidden:!this.state.showConfirmDelete,onClick:this.delete},"Conferma eliminazione"),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.unhautorized},"Utente non autorizzato!"))))))))),s.a.createElement("hr",null))}}]),a}(n.Component),R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loaded:!1,articles:[],allArticles:[],isAdmin:""},n.showArticles=n.showArticles.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/articles").then((function(e){return e.json()})).then((function(e){return t.setState({articles:e})})).catch(console.log);case 2:this.setState({loaded:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showArticles",value:function(){if(0===this.state.articles.length)return s.a.createElement("div",{className:"NoArticles"},s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Non ci sono articoli!"));var e,t=[],a=Object(C.a)(this.state.articles);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(s.a.createElement(P,{key:n._id,title:n.title,subtitle:n.subtitle,imageURL:n.imageURL,author:n.author}))}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"loading",value:function(){return s.a.createElement("div",{className:"spinner-border text-info",hidden:this.state.loaded,role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))}},{key:"render",value:function(){return s.a.createElement("div",{className:"ArticlesByAuthor"},s.a.createElement("div",{className:"authorized",hidden:!this.props.isSuperUser},s.a.createElement("h4",{className:"titleLabel"},"Tutti gli articoli"),this.loading(),this.showArticles()),s.a.createElement("div",{className:"unhautorized",hidden:this.props.isSuperUser},s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert"},"Utente non autorizzato!")))}}]),a}(n.Component),T=(a(74),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",wrongPassword:!1,userNotFound:!1},n.handleUsernameChange=n.handleUsernameChange.bind(Object(v.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.signIn=n.signIn.bind(Object(v.a)(n)),n.redirectToLogin=n.redirectToLogin.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")}},{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value,userNotFound:!1})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value,wrongPassword:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"redirectToLogin",value:function(){this.props.history.push("/login")}},{key:"signIn",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,e.next=5,E.a.post("/server/login",{username:this.state.username,password:this.state.password}).then((function(e){e.data.token?(sessionStorage.setItem("token",e.data.token),t=!0):e.data.userNotFound?a=!0:n=!0})).catch((function(e){console.log(e)}));case 5:!0===n&&this.setState({wrongPassword:!0}),!0===a&&this.setState({userNotFound:!0}),!0===t?(this.setState({isAuthenticated:!0,wrongPassword:!1}),sessionStorage.setItem("user",this.state.username),window.location.replace("/users/"+this.state.username)):(this.setState({isAuthenticated:!1}),this.redirectToLogin());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",id:"username",required:!0,onChange:this.handleUsernameChange}),s.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",id:"password",required:!0,onChange:this.handlePasswordChange}),s.a.createElement("button",{type:"submit",className:"btn btn-block btn-lg btn-dark buttonSubmit",onClick:this.signIn},"Accedi")),s.a.createElement("br",null),s.a.createElement("div",{className:"alert alert-danger",role:"alert",hidden:!this.state.wrongPassword},"Password errata!"),s.a.createElement("div",{className:"alert alert-danger",role:"alert",hidden:!this.state.userNotFound},"Utente inesistente!"))}}]),a}(n.Component)),_=(a(35),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:sessionStorage.getItem("token"),_isAdmin:!1,_isSuperUser:!1,edit:!1,delete:!1,unhautorized:!1},n.showEditConfirm=n.showEditConfirm.bind(Object(v.a)(n)),n.abortEdit=n.abortEdit.bind(Object(v.a)(n)),n.showDeleteConfirm=n.showDeleteConfirm.bind(Object(v.a)(n)),n.abortDelete=n.abortDelete.bind(Object(v.a)(n)),n.handleIsAdminChange=n.handleIsAdminChange.bind(Object(v.a)(n)),n.handleIsSuperUserChange=n.handleIsSuperUserChange.bind(Object(v.a)(n)),n.edit=n.edit.bind(Object(v.a)(n)),n.delete=n.delete.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleIsAdminChange",value:function(e){this.setState({_isAdmin:e.target.checked})}},{key:"handleIsSuperUserChange",value:function(e){this.setState({_isSuperUser:e.target.checked})}},{key:"showEditConfirm",value:function(){this.setState({edit:!0})}},{key:"abortEdit",value:function(){this.setState({edit:!1})}},{key:"showDeleteConfirm",value:function(){this.setState({delete:!0})}},{key:"abortDelete",value:function(){this.setState({delete:!1})}},{key:"edit",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,E.a.put("/server/users/"+this.props.username,{token:this.state.token,username:this.props.username,isAdmin:this.state._isAdmin,isSuperUser:this.state._isSuperUser}).then((function(e){e.data.success&&window.location.replace("/users"),e.data.unhautorized&&(t=!0)})).catch((function(e){console.log(e)}));case 3:this.setState({unhautorized:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.next=3,E.a.patch("/server/users/"+this.props.username,{token:this.state.token}).then((function(e){e.data.deleted&&window.location.replace("/users"),e.data.unhautorized&&this.setState({unhautorized:!1})})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"user"},s.a.createElement("p",null,this.props.username),s.a.createElement("p",{hidden:!this.props.isSuperUser},"Super User"),s.a.createElement("p",{hidden:!this.props.isAdmin},"Admin"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"editPermits",hidden:!this.state.edit},s.a.createElement("input",{className:"form-check-input check",type:"checkbox",onChange:this.handleIsAdminChange,id:"isAdmin"}),s.a.createElement("label",{className:"form-check-label checkLabel",htmlFor:"isAdmin"},"Admin"),s.a.createElement("input",{className:"form-check-input check",type:"checkbox",onChange:this.handleIsSuperUserChange,id:"isSuperUser"}),s.a.createElement("label",{className:"form-check-label checkLabel",htmlFor:"isSuperUser"},"Super User")),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-dark buttons",hidden:!this.state.edit,onClick:this.abortEdit},"Annulla"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-success buttons",hidden:!this.state.edit,onClick:this.edit},"Salva"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-dark buttons",hidden:!this.state.delete,onClick:this.abortDelete},"Annulla"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-danger buttons",hidden:!this.state.delete,onClick:this.delete},"Elimina utente"),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.unhautorized},"Utente non autorizzato!"),s.a.createElement("div",{className:"whenDelete",hidden:this.state.delete},s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-warning buttons",hidden:this.state.edit,onClick:this.showEditConfirm},"Modifica"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-danger buttons",hidden:this.state.edit,onClick:this.showDeleteConfirm},"Elimina"))),s.a.createElement("hr",null))}}]),a}(n.Component)),M=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:[]},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/users").then((function(e){return e.json()})).then((function(e){return t.setState({users:e})})).catch(console.log);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"showUsers",value:function(){if(!0===this.props.isSuperUser){if(0===this.state.users.length)return s.a.createElement("div",{className:"NoUsers"},s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Non ci sono utenti!"));var e,t=[],a=Object(C.a)(this.state.users);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(s.a.createElement(_,{key:n._id,username:n.username,isAdmin:n.isAdmin,isSuperUser:n.isSuperUser}))}}catch(i){a.e(i)}finally{a.f()}return t}}},{key:"render",value:function(){return s.a.createElement("div",{className:"users"},s.a.createElement("div",{className:"authorized",hidden:!this.props.isSuperUser},s.a.createElement("h4",{className:"titleLabel"},"Lista utenti"),this.showUsers()),s.a.createElement("div",{className:"unhautorized",hidden:this.props.isSuperUser},s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert"},"Utente non autorizzato!")))}}]),a}(n.Component),F=(a(36),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:sessionStorage.getItem("token"),edit:!1,password:"",password2:"",noMatch:!1,tooShort:!1,showDeleteConfirm:!1,unhautorized:!1},n.handlePasswordChange1=n.handlePasswordChange1.bind(Object(v.a)(n)),n.handlePasswordChange2=n.handlePasswordChange2.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.edit=n.edit.bind(Object(v.a)(n)),n.abort=n.abort.bind(Object(v.a)(n)),n.confirm=n.confirm.bind(Object(v.a)(n)),n.delete=n.delete.bind(Object(v.a)(n)),n.newArticle=n.newArticle.bind(Object(v.a)(n)),n.getArticlesByAuthor=n.getArticlesByAuthor.bind(Object(v.a)(n)),n.newUser=n.newUser.bind(Object(v.a)(n)),n.editUser=n.editUser.bind(Object(v.a)(n)),n.allArticles=n.allArticles.bind(Object(v.a)(n)),n.logout=n.logout.bind(Object(v.a)(n)),n.showDeleteConfirm=n.showDeleteConfirm.bind(Object(v.a)(n)),n.abortDelete=n.abortDelete.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handlePasswordChange1",value:function(e){this.setState({password:e.target.value}),e.target.value!==this.state.password2?this.setState({noMatch:!0}):e.target.value===this.state.password2&&this.setState({noMatch:!1}),this.state.password.length<8||this.state.password2.length<8?this.setState({tooShort:!0}):(this.state.password.length>=8||this.state.password2.length>=8)&&this.setState({tooShort:!1}),this.forceUpdate()}},{key:"handlePasswordChange2",value:function(e){this.setState({password2:e.target.value}),this.state.password!==e.target.value?this.setState({noMatch:!0}):this.state.password===e.target.value&&this.setState({noMatch:!1}),this.state.password.length<8?this.setState({tooShort:!0}):this.state.password.length>=8&&this.setState({tooShort:!1}),this.forceUpdate()}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"edit",value:function(){this.setState({edit:!0})}},{key:"abort",value:function(){this.setState({edit:!1})}},{key:"confirm",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!1!==this.state.noMatch||!1!==this.state.tooShort){e.next=5;break}return e.next=4,E.a.put("http://localhost:4000/server/users/"+this.props.username,{token:this.state.token,username:this.props.username,password:this.state.password,isAdmin:this.props.isAdmin,isSuperUser:this.props.isSuperUser}).then((function(e){e.data.success&&window.location.reload(),e.data.unhautorized&&(t=!0)})).catch((function(e){console.log(e)}));case 4:this.setState({unhautorized:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showDeleteConfirm",value:function(){this.setState({showDeleteConfirm:!0})}},{key:"abortDelete",value:function(){this.setState({showDeleteConfirm:!1})}},{key:"logout",value:function(){sessionStorage.clear(),localStorage.clear(),window.location.replace("/articles")}},{key:"delete",value:function(){var e=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.next=3,E.a.patch("/server/users/"+this.props.username,{token:this.state.token}).then((function(e){e.data.deleted&&(sessionStorage.clear(),localStorage.clear(),window.location.replace("/login")),e.data.unhautorized&&this.setState({unhautorized:!1})})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newArticle",value:function(){window.location.replace("/article/new")}},{key:"getArticlesByAuthor",value:function(){window.location.replace("/users/"+this.props.username+"/articles")}},{key:"newUser",value:function(){window.location.replace("/user/new")}},{key:"editUser",value:function(){window.location.replace("/users")}},{key:"allArticles",value:function(){window.location.replace("/allArticles")}},{key:"render",value:function(){return s.a.createElement("div",{className:"userDetail"},s.a.createElement("h4",{className:"profileLabel"},"Profilo utente"),s.a.createElement("br",null),s.a.createElement("label",{className:"label",htmlFor:"username"},"Username:"),s.a.createElement("input",{type:"text",className:"form-control-plaintext",disabled:!0,id:"username",onChange:this.handleSubmit,value:this.props.username}),s.a.createElement("form",{hidden:!this.state.edit,onSubmit:this.handleSubmit},s.a.createElement("label",{htmlFor:"newPassword"},"Nuova password:"),s.a.createElement("input",{type:"password",className:"form-control inputForm",id:"newPassword",onChange:this.handlePasswordChange1}),s.a.createElement("label",{htmlFor:"newPassword2"},"Inserisci nuovamente la nuova password: "),s.a.createElement("input",{type:"password",className:"form-control inputForm",id:"newPassword2",onChange:this.handlePasswordChange2}),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.noMatch},"Le password non corrispondono!"),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.tooShort},"La password deve contenere almeno 8 caratteri!"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-dark buttons",onClick:this.abort},"Annulla"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-success buttons",onClick:this.confirm},"Conferma"),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.unhautorized},"Utente non autorizzato!")),s.a.createElement("input",{readOnly:!0,className:"form-check-input check",type:"checkbox",hidden:this.state.edit,checked:this.props.isAdmin,id:"isAdmin"}),s.a.createElement("label",{className:"form-check-label checkLabel",hidden:this.state.edit,htmlFor:"isAdmin"},"Admin"),s.a.createElement("br",null),s.a.createElement("input",{readOnly:!0,className:"form-check-input check",type:"checkbox",hidden:this.state.edit,checked:this.props.isSuperUser,id:"isSuperUser"}),s.a.createElement("label",{className:"form-check-label checkLabel",hidden:this.state.edit,htmlFor:"isSuperUser"},"Super User"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("form",{className:"editButtons",hidden:this.state.edit,onSubmit:this.handleSubmit},s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.showDeleteConfirm},"Sicuro di voler eliminare l'account? L'operazione non sar\xe0 reversibile."),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.edit},"Modifica password"),s.a.createElement("div",{className:"onlyAdmin",hidden:!this.props.isAdmin},s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.newArticle},"Nuovo articolo"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.getArticlesByAuthor},"I tuoi articoli")),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-dark btn-block buttons",hidden:!this.state.showDeleteConfirm,onClick:this.abortDelete},"Annulla"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-danger btn-block buttons buttonDel",hidden:!this.state.showDeleteConfirm,onClick:this.delete},"Elimina account"),s.a.createElement("div",{className:"onlySuperUser",hidden:!this.props.isSuperUser},s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.newUser},"Nuovo utente"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.editUser},"Modifica utente"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.allArticles},"Tutti gli articoli")),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-danger btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.showDeleteConfirm},"Elimina account"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-dark btn-block buttons",hidden:this.state.showDeleteConfirm,onClick:this.logout},"Logout")))}}]),a}(n.Component)),B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",isAdmin:!1,isSuperUser:!1,unhautorized:!1,userAlreadyExist:!1},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleUsernameChange=n.handleUsernameChange.bind(Object(v.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(v.a)(n)),n.handleIsAdminChange=n.handleIsAdminChange.bind(Object(v.a)(n)),n.handleIsSuperUserChange=n.handleIsSuperUserChange.bind(Object(v.a)(n)),n.addNewUser=n.addNewUser.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value,userAlreadyExist:!1})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleIsAdminChange",value:function(e){this.setState({isAdmin:e.target.checked})}},{key:"handleIsSuperUserChange",value:function(e){this.setState({isSuperUser:e.target.checked})}},{key:"addNewUser",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,e.next=4,E.a.post("/server/users/newUser",{token:sessionStorage.getItem("token"),username:this.state.username,password:this.state.password,isAdmin:this.state.isAdmin,isSuperUser:this.state.isSuperUser}).then((function(e){e.data.created&&window.location.replace("/users"),!0===e.data.unhautorized&&(t=!0),!0===e.data.userAlreadyExist&&(a=!0)})).catch((function(e){console.log(e)}));case 4:this.setState({unhautorized:t,userAlreadyExist:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"newUser"},s.a.createElement("div",{className:"hautorized",hidden:!this.props.isSuperUser},s.a.createElement("h4",{className:"titleLabel"},"Nuovo utente"),s.a.createElement("br",null),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",className:"form-control form-control-lg",id:"username",required:!0,onChange:this.handleUsernameChange,placeholder:"Username"}),s.a.createElement("input",{type:"password",className:"form-control form-control-lg",id:"password",required:!0,onChange:this.handlePasswordChange,placeholder:"Password"}),s.a.createElement("input",{type:"checkbox",className:"form-check-input check",id:"isAdmin",onChange:this.handleIsAdminChange}),s.a.createElement("label",{className:"form-check-label checkLabel",htmlFor:"isAdmin"},"Admin"),s.a.createElement("br",null),s.a.createElement("input",{type:"checkbox",className:"form-check-input check",id:"isSuperUser",onChange:this.handleIsSuperUserChange}),s.a.createElement("label",{className:"form-check-label checkLabel",htmlFor:"isSuperUser"},"Super User"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.unhautorized},"Utente non autorizzato!"),s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert",hidden:!this.state.userAlreadyExist},"Nome utente gi\xe0 inserito!"),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-primary buttonNewUser",onClick:this.addNewUser},"Aggiungi utente"))),s.a.createElement("div",{className:"unhautorized",hidden:this.props.isSuperUser},s.a.createElement("div",{className:"alert alert-danger alertLabel",role:"alert"},"Utente non autorizzato!")))}}]),a}(n.Component),G=(a(75),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={GDPRAccepted:!1},n.accept=n.accept.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){sessionStorage.getItem("GDPR")&&this.setState({GDPRAccepted:!0})}},{key:"accept",value:function(){this.setState({GDPRAccepted:!0}),sessionStorage.setItem("GDPR",!0)}},{key:"render",value:function(){return s.a.createElement("div",{className:"Footer"},s.a.createElement("nav",{className:"navbar navbar-dark bg-dark fixed-bottom footerContent"},s.a.createElement("div",{className:"accepted",hidden:!this.state.GDPRAccepted},s.a.createElement("p",{className:"powered"},"ecodibugliano.it"),s.a.createElement("p",{className:"powered"},"Powered by ",s.a.createElement("a",{href:"https://facebook.com/santo1991",target:"_blank",rel:"noopener noreferrer"},"Francesco Santini"))),s.a.createElement("div",{className:"notAccepted",hidden:this.state.GDPRAccepted},s.a.createElement("div",{className:"container fluid"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-6"},s.a.createElement("p",{className:"cookie"},'Questo sito utilizza dei cookie tecnici, necessari al proprio funzionamento. Premendo il tasto "Ok", oppure proseguendo con la navigazione, acconsentirai al loro utilizzo. '),s.a.createElement("button",{type:"submit",className:"btn btn-sm btn-primary cookieButton",onClick:this.accept},"Ok, ho capito"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-12"}))))))}}]),a}(n.Component)),q=(a(76),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(N,null),s.a.createElement(h.a,null,s.a.createElement(m.b,{exact:!0,path:"/",component:y}),s.a.createElement(m.b,{exact:!0,path:"/articles",component:S}),s.a.createElement(m.b,{exact:!0,path:"/articles/:id",component:x}),s.a.createElement(m.b,{exact:!0,path:"/category/:category",component:j}),s.a.createElement(m.b,{exact:!0,path:"/login",component:T}),s.a.createElement(k,{exact:!0,path:"/users",component:M}),s.a.createElement(k,{exact:!0,path:"/users/:userId",component:F}),s.a.createElement(k,{exact:!0,path:"/user/new",component:B}),s.a.createElement(k,{exact:!0,path:"/users/:userId/articles",component:L}),s.a.createElement(k,{exact:!0,path:"/users/:userId/edit/:title",component:I}),s.a.createElement(k,{exact:!0,path:"/article/new",component:z}),s.a.createElement(k,{exact:!0,path:"/allArticles",component:R})),s.a.createElement(G,null))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.f0a3ab73.chunk.js.map